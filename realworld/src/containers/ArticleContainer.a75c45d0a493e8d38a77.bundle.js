/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
dojoWebpackJsonprealworld_app(["src/containers/ArticleContainer"],{"./node_modules/snarkdown/dist/snarkdown.es.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={"":["<em>","</em>"],_:["<strong>","</strong>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function o(e){return e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),"")}function n(e){return(e+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}t.default=function e(t){var s,a,c,i,l,d=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^```(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:\!\[([^\]]*?)\]\(([^\)]+?)\))|(\[)|(\](?:\(([^\)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(\-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,3})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*])/gm,m=[],u="",f=0,g={};function b(e){var t=r[e.replace(/\*/g,"_")[1]||""],s=m[m.length-1]==e;return t?t[1]?(m[s?"pop":"push"](e),t[0|s]):t[0]:e}function j(){for(var e="";m.length;)e+=b(m[m.length-1]);return e}for(t=t.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(e,t,s){return g[t.toLowerCase()]=s,""}).replace(/^\n+|\n+$/g,"");c=d.exec(t);)a=t.substring(f,c.index),f=d.lastIndex,s=c[0],a.match(/[^\\](\\\\)*\\$/)||(c[3]||c[4]?s='<pre class="code '+(c[4]?"poetry":c[2].toLowerCase())+'">'+o(n(c[3]||c[4]).replace(/^\n+|\n+$/g,""))+"</pre>":c[6]?((l=c[6]).match(/\./)&&(c[5]=c[5].replace(/^\d+/gm,"")),i=e(o(c[5].replace(/^\s*[>*+.-]/gm,""))),">"===l?l="blockquote":(l=l.match(/\./)?"ol":"ul",i=i.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),s="<"+l+">"+i+"</"+l+">"):c[8]?s='<img src="'+n(c[8])+'" alt="'+n(c[7])+'">':c[10]?(u=u.replace("<a>",'<a href="'+n(c[11]||g[a.toLowerCase()])+'">'),s=j()+"</a>"):c[9]?s="<a>":c[12]||c[14]?s="<"+(l="h"+(c[14]?c[14].length:"="===c[13][0]?1:2))+">"+e(c[12]||c[15])+"</"+l+">":c[16]?s="<code>"+n(c[16])+"</code>":(c[17]||c[1])&&(s=b(c[17]||"--"))),u+=a,u+=s;return(u+t.substring(f)+j()).trim()}},"./src/containers/ArticleContainer.ts":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("./src/widgets/Article.ts"),o=s("./src/processes/articleProcesses.ts"),n=s("./node_modules/@dojo/framework/stores/StoreInjector.mjs");t.default=Object(n.a)(r.a,"state",{paths:[["user"],["article"]],getProperties:function(e,t){const{get:s,path:r}=e;return{article:s(r("article","item")),authorProfile:s(r("article","item","author")),comments:s(r("article","comments"))||[],newComment:s(r("article","newComment")),loaded:s(r("article","loaded")),isAuthenticated:!!s(r("user","token")),loggedInUser:s(r("user","username")),username:s(r("user","username")),slug:t.slug,deleteComment:Object(o.c)(e),addComment:Object(o.a)(e),onNewCommentInput:Object(o.g)(e),favoriteArticle:Object(o.d)(e),followUser:Object(o.e)(e),deleteArticle:Object(o.b)(e)}}})},"./src/widgets/Article.ts":function(e,t,s){"use strict";var r=s("./node_modules/@dojo/framework/widget-core/WidgetBase.mjs"),o=s("./node_modules/@dojo/framework/widget-core/d.mjs"),n=s("./node_modules/@dojo/framework/routing/Link.mjs"),a=s("./src/widgets/Comment.ts"),c=s("./src/widgets/ArticleMeta.ts");const i=s("./node_modules/snarkdown/dist/snarkdown.es.js");t.a=class extends r.a{_addComment(e){if(e.preventDefault(),this.properties.article){const{article:{slug:e},newComment:t}=this.properties;this.properties.addComment({slug:e,newComment:t})}}_onNewCommentInput(e){this.properties.onNewCommentInput({newComment:e.target.value})}render(){const{username:e,deleteArticle:t,followUser:s,favoriteArticle:r,isAuthenticated:l,newComment:d,deleteComment:m,comments:u,loaded:f,loggedInUser:g,article:b}=this.properties;if(!f)return Object(o.f)("div",{classes:"article-page"},[Object(o.f)("div",{key:"banner",classes:"banner"})]);const{createdAt:j,slug:p,favorited:w,favoritesCount:h,author:O}=b;return Object(o.f)("div",{classes:"article-page"},[Object(o.f)("div",{key:"banner",classes:"banner"},[Object(o.f)("div",{classes:"container"},[Object(o.f)("h1",[b.title]),Object(o.g)(c.a,{authorProfile:O,isAuthenticated:l,slug:p,createdAt:j,favoriteArticle:r,followUser:s,deleteArticle:t,username:e,favorited:w,favoritesCount:h})])]),Object(o.f)("div",{key:"page",classes:["container","page"]},[Object(o.f)("div",{classes:["row","article-content"]},[Object(o.f)("div",{classes:"col-xs-12"},[Object(o.f)("div",{innerHTML:i.default(b.body)}),Object(o.f)("ul",{classes:"tag-list"},b.tagList.map(e=>Object(o.f)("li",{classes:["tag-default","tag-pill","tag-outline"]},[e])))])]),Object(o.f)("hr"),Object(o.f)("div",{classes:"article-actions"},[Object(o.g)(c.a,{authorProfile:O,isAuthenticated:l,slug:p,createdAt:j,favoriteArticle:r,followUser:s,deleteArticle:t,username:e,favorited:w,favoritesCount:h})]),Object(o.f)("div",{classes:"row"},[Object(o.f)("div",{classes:["col-xs-12","col-md-8","offset-md-2"]},[l?Object(o.f)("form",{classes:["card","comment-form"]},[Object(o.f)("div",{classes:"card-block"},[Object(o.f)("textarea",{value:d,oninput:this._onNewCommentInput,classes:"form-control",placeholder:"Write a comment...",rows:3})]),Object(o.f)("div",{classes:"card-footer"},[Object(o.f)("img",{classes:"comment-author-img",src:""}),Object(o.f)("button",{onclick:this._addComment,classes:["btn","btn-sm","btn-primary"]},["Post Comment"])])]):Object(o.f)("p",[Object(o.g)(n.a,{to:"login"},["Sign In"])," or ",Object(o.g)(n.a,{to:"register"},["Sign Up"])," to add comments on this article."]),Object(o.f)("div",u.map((e,t)=>Object(o.g)(a.a,{key:t,comment:e,loggedInUser:g,deleteComment:m,slug:b.slug})))])])])])}}},"./src/widgets/ArticleAuthorControls.ts":function(e,t,s){"use strict";var r=s("./node_modules/@dojo/framework/widget-core/WidgetBase.mjs"),o=s("./node_modules/@dojo/framework/widget-core/d.mjs"),n=s("./node_modules/@dojo/framework/routing/Link.mjs");t.a=class extends r.a{_deleteArticle(){const{slug:e}=this.properties;this.properties.deleteArticle({slug:e})}render(){const{slug:e}=this.properties;return Object(o.f)("span",[Object(o.g)(n.a,{to:"edit-post",params:{slug:e},classes:["btn","btn-sm","btn-outline-secondary"]},[Object(o.f)("i",{classes:"ion-edit"})," Edit Article"]),Object(o.f)("button",{onclick:this._deleteArticle,classes:["btn","btn-sm","btn-outline-danger"]},[Object(o.f)("i",{classes:"ion-trash-a"})," Delete Article"])])}}},"./src/widgets/ArticleControls.ts":function(e,t,s){"use strict";var r=s("./node_modules/@dojo/framework/widget-core/WidgetBase.mjs"),o=s("./node_modules/@dojo/framework/widget-core/d.mjs");t.a=class extends r.a{_favoriteArticle(){const{slug:e,favorited:t}=this.properties;this.properties.favoriteArticle({slug:e,favorited:t})}_followUser(){const{authorUsername:e,following:t}=this.properties;this.properties.followUser({username:e,following:t})}render(){const{favoritesCount:e,favorited:t,following:s,authorUsername:r}=this.properties;return Object(o.f)("span",[Object(o.f)("button",{onclick:this._followUser,classes:["btn","btn-sm",s?"btn-secondary":"btn-outline-secondary"]},[Object(o.f)("i",{classes:"ion-plus-round"}),`${s?" Unfollow":" Follow"} ${r}`]),Object(o.f)("button",{onclick:this._favoriteArticle,classes:["btn","btn-sm",t?"btn-primary":"btn-outline-primary"]},[Object(o.f)("i",{classes:"ion-heart"}),`${t?" Unfavorite":" Favorite"}`,Object(o.f)("span",{classes:"counter"},[`(${e})`])])])}}},"./src/widgets/ArticleMeta.ts":function(e,t,s){"use strict";var r=s("./node_modules/@dojo/framework/widget-core/WidgetBase.mjs"),o=s("./node_modules/@dojo/framework/widget-core/d.mjs"),n=s("./node_modules/@dojo/framework/routing/Link.mjs"),a=s("./src/widgets/ArticleControls.ts"),c=s("./src/widgets/ArticleAuthorControls.ts");t.a=class extends r.a{render(){const{favoriteArticle:e,followUser:t,deleteArticle:s,username:r,favorited:i,favoritesCount:l,isAuthenticated:d,createdAt:m,slug:u,authorProfile:f}=this.properties;return Object(o.f)("div",{classes:"article-meta"},[Object(o.g)(n.a,{to:"user",params:{username:f.username}},[Object(o.f)("img",{src:f.image})]),Object(o.f)("div",{classes:"info"},[Object(o.g)(n.a,{to:"user",classes:"author",params:{username:f.username}},[f.username]),Object(o.f)("span",{classes:"date"},[new Date(m).toDateString()])]),d?r===f.username?Object(o.g)(c.a,{slug:u,deleteArticle:s}):Object(o.g)(a.a,{favorited:i,followUser:t,favoriteArticle:e,favoritesCount:l,slug:u,following:f.following,authorUsername:f.username}):null])}}},"./src/widgets/Comment.ts":function(e,t,s){"use strict";var r=s("./node_modules/@dojo/framework/widget-core/WidgetBase.mjs"),o=s("./node_modules/@dojo/framework/widget-core/d.mjs"),n=s("./node_modules/@dojo/framework/routing/Link.mjs");t.a=class extends r.a{_deleteComment(){const{slug:e,comment:{id:t}}=this.properties;this.properties.deleteComment({slug:e,id:t})}render(){const{comment:e,loggedInUser:t}=this.properties;return Object(o.f)("div",{classes:"card"},[Object(o.f)("div",{classes:"card-block"},[Object(o.f)("p",{classes:"card-text"},[e.body])]),Object(o.f)("div",{classes:"card-footer"},[Object(o.g)(n.a,{to:"user",classes:"comment-author",params:{username:e.author.username}},[Object(o.f)("img",{src:e.author.image,classes:"comment-author-img"})]),Object(o.g)(n.a,{to:"user",classes:"comment-author",params:{username:e.author.username}},[` ${e.author.username}`]),Object(o.f)("div",{classes:"date-posted"},[new Date(e.createdAt).toDateString()]),t?Object(o.f)("div",{classes:"mod-options"},[Object(o.f)("i",{classes:"ion-trash-a",onclick:this._deleteComment})]):null])])}}}});
//# sourceMappingURL=ArticleContainer.a75c45d0a493e8d38a77.bundle.js.map